import{j as t,r as d}from"./index-DmzlEUdG.js";const f=({title:o,image:l,price:a,addToCart:p,removeFromCart:s,isAddedToCart:m,id:u,search:c})=>{let h=c?o.split(c):[o];return c&&h.splice(1,0,c),console.log(h),t.jsxs("div",{className:"product",children:[t.jsx("img",{src:l,alt:"title"}),t.jsxs("div",{className:"title",children:[t.jsx("strong",{children:h.map((b,g)=>{const j=c&&b===c?"select":"";return t.jsx("span",{id:g,className:j,children:b})})}),t.jsxs("strong",{children:["$",a]})]}),m?t.jsx("button",{onClick:()=>s(u),children:"Remove From Cart"}):t.jsx("button",{onClick:()=>p(u),children:" Add To Cart"})]})},y=({image:o,title:l,price:a,index:p,id:s,removeFromCart:m,quantity:u,addToCart:c})=>t.jsxs("div",{className:"cart-item",children:[t.jsx("img",{src:o,alt:l,className:"cart-item"}),t.jsx("p",{className:"title",children:l}),t.jsxs("div",{className:"metadata",children:[t.jsxs("strong",{className:"price",children:["$",a]}),t.jsxs("strong",{children:[" Quantity : ",u]})]}),t.jsxs("div",{className:"cart-buttons",children:[t.jsx("button",{onClick:()=>m(s),children:" Remove"}),t.jsx("button",{onClick:()=>c(s),children:" Add(+1)"})]})]},p),A=[{id:167,title:"300 Touring",price:28999.99,thumbnail:"https://cdn.dummyjson.com/products/images/vehicle/300%20Touring/thumbnail.png"},{id:99,title:"Amazon Echo Plus",price:99.99,thumbnail:"https://cdn.dummyjson.com/products/images/mobile-accessories/Amazon%20Echo%20Plus/thumbnail.png"},{id:137,title:"American Football",price:19.99,thumbnail:"https://cdn.dummyjson.com/products/images/sports-accessories/American%20Football/thumbnail.png"},{id:11,title:"Annibale Colombo Bed",price:1899.99,thumbnail:"https://cdn.dummyjson.com/products/images/furniture/Annibale%20Colombo%20Bed/thumbnail.png"},{id:12,title:"Annibale Colombo Sofa",price:2499.99,thumbnail:"https://cdn.dummyjson.com/products/images/furniture/Annibale%20Colombo%20Sofa/thumbnail.png"},{id:16,title:"Apple",price:1.99,thumbnail:"https://cdn.dummyjson.com/products/images/groceries/Apple/thumbnail.png"},{id:101,title:"Apple AirPods Max Silver",price:549.99,thumbnail:"https://cdn.dummyjson.com/products/images/mobile-accessories/Apple%20AirPods%20Max%20Silver/thumbnail.png"},{id:100,title:"Apple Airpods",price:129.99,thumbnail:"https://cdn.dummyjson.com/products/images/mobile-accessories/Apple%20Airpods/thumbnail.png"},{id:102,title:"Apple Airpower Wireless Charger",price:79.99,thumbnail:"https://cdn.dummyjson.com/products/images/mobile-accessories/Apple%20Airpower%20Wireless%20Charger/thumbnail.png"},{id:103,title:"Apple HomePod Mini Cosmic Grey",price:99.99,thumbnail:"https://cdn.dummyjson.com/products/images/mobile-accessories/Apple%20HomePod%20Mini%20Cosmic%20Grey/thumbnail.png"}],v=()=>{const[o,l]=d.useState([]),[a,p]=d.useState(""),[s,m]=d.useState([]),[u,c]=d.useState(0),h=async()=>{const e=await fetch("https://dummyjson.com/products?limit=10&select=title,price,id,thumbnail&sortBy=title&order=asc"),{products:i}=await e.json();l(i)},b=e=>{const i=o.find(x=>x.id.toString()===e.toString());if(!i)return;const n=s.findIndex(x=>x.id.toString()===e.toString()),r=[...s];n==-1?r.push({id:i.id.toString(),title:i.title,quantity:1,image:i.thumbnail,amount:i.price,price:i.price}):(r[n].quantity+=1,r[n].amount+=r[n].price),m(r)},g=e=>{const i=s.findIndex(r=>r.id===e);if(i===-1)return;const n=[...s];n[i].quantity-=1,n[i].amount-=n[i].price,n[i].quantity===0?m(n.filter(r=>r.id!==e)):m(n)},j=e=>{const i=e.target.value;p(i)};return d.useEffect(()=>{const e=s.reduce((i,{amount:n})=>Number(i+n),0);c(e.toFixed(2))},[s]),d.useEffect(()=>{l(a?A.filter(e=>e.title.includes(a)):A)},[a]),d.useEffect(()=>{h()},[]),t.jsxs("div",{className:"products-parent",children:[t.jsxs("div",{className:"",children:[t.jsx("div",{className:"search",children:t.jsx("input",{type:"text",name:"",id:"",onChange:j,value:a})}),t.jsx("div",{className:"products",children:o.map(e=>t.jsx(f,{addToCart:b,removeFromCart:g,image:e.thumbnail,price:e.price,id:e.id,title:e.title,isAddedToCart:s.some(i=>i.id==e.id),search:a},e.id))})]}),t.jsx("div",{className:"cart",children:t.jsxs("div",{className:"cart-items",children:[t.jsxs("div",{className:"cart-header",children:[t.jsx("div",{className:"h3",children:"CART"}),t.jsx("div",{className:"strong",children:u})]}),s.map((e,i)=>t.jsx(y,{index:i,removeFromCart:g,image:e.image,price:e.price,title:e.title,quantity:e.quantity,addToCart:b,id:e.id},e.id))]})})]})};export{v as default};
